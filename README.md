# Карта локальной сети

Веб-приложение для визуализации и управления сетевой инфраструктурой на базе Яндекс.Карт.

## Возможности

- **Визуализация сети** — узлы, оптические кроссы, кабельные муфты, опоры связи и кабели на карте
- **Трассировка жил** — путь оптического волокна от узла до узла через муфты и кроссы
- **Редактирование** — добавление и удаление объектов, прокладка кабелей, соединение жил
- **Кроссы** — соединение жил между кабелями и подключение жил к узлам сети
- **Муфты** — сращивание жил между кабелями (тип муфты и вместимость задаются при создании)
- **Группы** — объединение нескольких кроссов или узлов в одной точке с общим баллуном
- **Поиск** — быстрый поиск объектов по названию в шапке приложения
- **Экспорт / Импорт** — сохранение и загрузка карты в JSON
- **Импорт из NetBox** — загрузка устройств по API
- **Авторизация и роли** — администратор (полный доступ) и пользователь (только просмотр)
- **История изменений** — журнал действий пользователей
- **Тёмная и светлая тема** — переключение в шапке рядом с пользователем
- **Справка** — кнопка «?» в шапке открывает подробную инструкцию по использованию
- **Обновления** — приложение проверяет [релизы на GitHub](https://github.com/DanyWereWolf/Network-map/releases) и при новой версии показывает уведомление со ссылкой на загрузку

## Быстрый старт

1. Откройте `index.html` в браузере (или разверните на веб-сервере).
2. Войдите с учётными данными (по умолчанию: `admin` / `admin123`).
3. Переключитесь в режим **Редактирование** в боковой панели для добавления объектов и прокладки кабелей.

## Как пользоваться

### Режимы работы

- **Просмотр** — навигация по карте, клик по объектам для информации, трассировка жил. Редактирование недоступно.
- **Редактирование** — добавление и удаление объектов, прокладка кабелей, соединение жил в кроссах и муфтах, подключение жил к узлам. Доступно только пользователям с правами редактора.

### Типы объектов

| Тип              | Описание                                      | Назначение                                      |
|------------------|-----------------------------------------------|-------------------------------------------------|
| **Узел сети**    | Конечное сетевое устройство                   | Сервер, коммутатор; к узлам подключаются жилы из кроссов |
| **Оптический кросс** | Точка коммутации                          | Соединение жил между кабелями и вывод на узлы   |
| **Кабельная муфта**  | Соединительная муфта                      | Сращивание жил между кабелями                    |
| **Опора связи**   | Промежуточная точка                           | Транзит кабеля (воздушные линии)                |
| **Кабель**        | Оптический или медный                         | Соединение двух объектов (муфта, кросс, узел, опора) |

### Добавление объектов

В режиме редактирования выберите в боковой панели тип объекта (Узлы, Кроссы, Муфты, Опоры), при необходимости укажите тип муфты или название группы, затем кликните по карте в нужном месте.

### Прокладка кабеля

Нажмите **«Проложить кабель»**, выберите тип кабеля (4/8/16/24 жилы или медь), затем кликните по первому объекту (муфта, кросс, узел или опора), затем по второму. Кабель появится между ними.

### Соединение жил в кроссе

Откройте карточку кросса (клик по объекту). В блоке **«Управление жилами в кроссе»** можно:

- соединить две жилы из разных кабелей (выбрать первую, затем вторую);
- подключить жилу к узлу сети (кнопка **«Подключить к узлу»**);
- отключить жилу от узла (кнопка **✕** в режиме редактирования).

### Соединение жил в муфте

В карточке муфты отображается блок **«Объединение жил в муфте»**. Выберите жилу одного кабеля, затем жилу другого — они соединятся. Одна жила может быть соединена только с одной жилой из другого кабеля.

### Группы кроссов и узлов

Несколько кроссов или узлов в одной точке объединяются в группу. При клике по группе открывается баллун со списком: выбор объекта для просмотра или (в режиме редактирования) для прокладки кабеля. Название группы можно изменить; объект можно вынести из группы кнопкой **«Переместить»**.

### Поиск и интерфейс

- **Поиск** — поле в шапке: введите название или часть названия объекта, выберите результат — карта центрируется на объекте.
- **Легенда** — в боковой панели: условные обозначения типов объектов и кабелей.
- **Тема** — кнопка солнца/луны рядом с пользователем: переключение светлой и тёмной темы.
- **Справка** — кнопка «?» рядом с пользователем: подробная информация о программе и возможностях.
- **Экспорт / Импорт** — в боковой панели: сохранение карты в JSON и загрузка из файла.
- **Импорт из NetBox** — загрузка устройств из NetBox API по настроенному URL и токену.

### Роли пользователей

| Роль             | Возможности                                                                 |
|------------------|-----------------------------------------------------------------------------|
| **Администратор** | Полный доступ: редактирование, управление пользователями, история изменений |
| **Пользователь**  | Просмотр карты, информация об объектах, трассировка; без редактирования     |

### Горячие клавиши

| Клавиша    | Действие                              |
|------------|----------------------------------------|
| `Escape`   | Отмена текущей операции (например, прокладки кабеля) |
| `Delete`   | Удаление выбранного объекта (в режиме редактирования) |

### Типы кабелей

| Тип            | Кол-во жил | Цвет на карте |
|----------------|------------|---------------|
| Оптика 4 жилы  | 4          | Красный       |
| Оптика 8 жил   | 8          | Оранжевый     |
| Оптика 16 жил  | 16         | Фиолетовый    |
| Оптика 24 жилы | 24         | Бирюзовый     |
| Медь (витая пара) | 4      | Серый         |

## Логика соединений

```
Узел сети ←→ Кросс ←→ Кабель ←→ Муфта/Кросс ←→ Кабель ←→ ...
                ↓
            Опора (транзит)
```

- **Узел** подключается только к кроссу (жилы выводятся из кросса на узел).
- **Кросс** соединяет жилы между кабелями и выводит жилы на узлы.
- **Муфта** сращивает жилы между кабелями (без вывода на узлы).
- **Опора** — транзитная точка, кабель проходит без изменений.

## Хранение данных

Данные сохраняются в `localStorage` браузера:

- `networkMapData` — объекты карты
- `networkMapUsers` — пользователи системы
- `networkMapSession` — текущая сессия
- `networkMapHistory` — история изменений
- `networkMapTheme` — выбранная тема (light/dark)

Для переноса данных между устройствами используйте **Экспорт** и **Импорт** в боковой панели.

## Обновления приложения

Репозиторий: [github.com/DanyWereWolf/Network-map](https://github.com/DanyWereWolf/Network-map).

При загрузке страницы приложение проверяет последний релиз на GitHub. Если выложена версия новее текущей, появляется уведомление со ссылкой на [Releases](https://github.com/DanyWereWolf/Network-map/releases).

**Как пользователю установить обновление:**
1. В уведомлении нажать **«Перейти к загрузке»** (или открыть раздел Releases в репозитории).
2. На странице релиза скачать архив (ZIP) с файлами приложения.
3. Закрыть приложение, распаковать архив и заменить старые файлы новыми в папке с программой.
4. Запустить приложение снова.

**Как выложить новую версию:** создать **Release** в репозитории, указать тег (например, `v1.0.1`), прикрепить ZIP с файлами приложения. В `main.js` обновить константу `APP_VERSION`.

## Структура проекта

```
Network-map/
├── index.html   # Главная страница приложения
├── auth.html    # Страница авторизации
├── main.js      # Основная логика приложения
├── auth.js      # Логика авторизации
├── styles.css   # Стили приложения
├── auth.css     # Стили страницы авторизации
├── README.md    # Документация
├── BUILD.md     # Инструкция по сборке (при наличии)
└── LICENSE      # Лицензия
```

## Технологии

- **Яндекс.Карты API 2.1** — картографическая основа
- **JavaScript** — без фреймворков
- **CSS3 Variables** — темы, адаптивный дизайн
- **LocalStorage** — локальное хранение данных

## Лицензия

**Proprietary Software License**

Copyright (c) 2024-2026 Network-map. All Rights Reserved.

Несанкционированное копирование, распространение или модификация данного ПО запрещены. Подробнее см. [LICENSE](LICENSE).
